<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For My Valentine ‚ù§Ô∏è</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        /* --- 1. GLOBAL VARIABLES & RESETS --- */
        :root {
            --primary: #f43f5e; /* Rose 500 */
            --primary-dark: #881337; /* Rose 900 */
            --bg-color: #fff1f2; /* Rose 50 */
            --card-bg: rgba(255, 255, 255, 0.4);
            --text-color: #374151;
            --border-color: rgba(255, 255, 255, 0.5);
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode {
            --primary: #fb7185;
            --primary-dark: #fda4af;
            --bg-color: #0f172a; /* Slate 900 */
            --card-bg: rgba(30, 41, 59, 0.6);
            --text-color: #f1f5f9;
            --border-color: rgba(255, 255, 255, 0.1);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; padding: 0; font-family: 'Inter', sans-serif; background-color: var(--bg-color); color: var(--text-color); transition: background 0.5s, color 0.5s; overflow-x: hidden; width: 100%; }
        h1, h2, h3 { font-family: 'Dancing Script', cursive; margin: 0; }
        button { cursor: pointer; border: none; outline: none; font-family: 'Inter', sans-serif; }
        img { display: block; max-width: 100%; height: auto; }

        /* --- 2. UTILITIES --- */
        .container { max-width: 1000px; margin: 0 auto; padding: 20px; }
        .hidden { display: none !important; opacity: 0; pointer-events: none; }
        .text-center { text-align: center; }
        .flex-center { display: flex; align-items: center; justify-content: center; }
        .section-title { font-size: 2.5rem; color: var(--primary-dark); margin-bottom: 2rem; text-align: center; }
        
        /* Glass Effect */
        .glass { background: var(--card-bg); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid var(--border-color); border-radius: 1.5rem; box-shadow: var(--shadow); }

        /* --- 3. COMPONENTS --- */
        
        /* Navbar */
        nav { position: fixed; top: 0; left: 0; width: 100%; z-index: 100; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; transition: 0.3s; background: rgba(255,255,255,0.1); backdrop-filter: blur(5px); }
        .logo { font-family: 'Dancing Script', cursive; font-size: 1.5rem; color: var(--primary); font-weight: bold; }
        .theme-btn { background: transparent; font-size: 1.5rem; }

        /* Hero Carousel */
        .carousel-container { position: relative; width: 100%; height: 500px; border-radius: 20px; overflow: hidden; margin-top: 80px; box-shadow: var(--shadow); }
        .slide { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; transition: opacity 1s ease-in-out; }
        .slide.active { opacity: 1; }
        .slide img { width: 100%; height: 100%; object-fit: cover; }
        .caption { position: absolute; bottom: 0; left: 0; width: 100%; background: linear-gradient(transparent, rgba(0,0,0,0.8)); padding: 40px 20px 20px; color: white; font-family: 'Dancing Script'; font-size: 2rem; }
        .carousel-btn { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.3); color: white; padding: 10px 15px; border-radius: 50%; font-size: 1.2rem; }
        .prev { left: 10px; } .next { right: 10px; }

        /* Flip Cards (3 Reasons) */
        .cards-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 40px 0; }
        .flip-card { background-color: transparent; width: 100%; height: 300px; perspective: 1000px; }
        .flip-card-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.8s; transform-style: preserve-3d; }
        .flip-card:hover .flip-card-inner { transform: rotateY(180deg); }
        .flip-card-front, .flip-card-back { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; border-radius: 20px; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 20px; box-shadow: var(--shadow); }
        .flip-card-front { background: var(--card-bg); border: 1px solid var(--border-color); }
        .flip-card-back { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; transform: rotateY(180deg); }

        /* Timeline (Journey) - Rebuilt for Mobile Stability */
        .timeline { position: relative; max-width: 800px; margin: 50px auto; padding: 20px 0; }
        .timeline::before { content: ''; position: absolute; top: 0; bottom: 0; left: 20px; width: 4px; background: var(--primary); border-radius: 2px; }
        .timeline-item { position: relative; margin-bottom: 50px; padding-left: 50px; opacity: 0; transform: translateY(20px); transition: all 0.8s ease; }
        .timeline-item.active { opacity: 1; transform: translateY(0); }
        .timeline-dot { position: absolute; left: 0; top: 0; width: 40px; height: 40px; background: var(--primary); border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center; z-index: 10; font-size: 1.2rem; border: 4px solid white; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .timeline-content { background: var(--card-bg); padding: 20px; border-radius: 15px; border: 1px solid var(--border-color); box-shadow: var(--shadow); }
        .timeline-date { color: var(--primary); font-weight: bold; font-size: 0.8rem; letter-spacing: 1px; text-transform: uppercase; }
        .timeline-img { width: 100%; height: 200px; object-fit: cover; border-radius: 10px; margin-bottom: 10px; }

        /* Ticket Section */
        .ticket { background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.15); border: 2px solid var(--primary); margin: 40px 0; transition: transform 0.3s; }
        .dark-mode .ticket { background: #1e293b; color: white; }
        .ticket:hover { transform: scale(1.02); }
        .ticket-header { background: var(--primary); color: white; padding: 15px; text-align: center; font-weight: bold; letter-spacing: 2px; }
        .ticket-body { padding: 30px; display: flex; flex-direction: column; align-items: center; gap: 20px; }
        @media (min-width: 600px) { .ticket-body { flex-direction: row; justify-content: space-between; } }
        .location h3 { font-size: 1.5rem; font-weight: bold; margin: 5px 0; }
        .route { flex: 1; text-align: center; color: var(--primary); }
        .route-line { height: 4px; background: #e5e7eb; width: 100%; position: relative; margin: 10px 0; border-radius: 2px; }
        .train-icon { position: absolute; top: -15px; left: 50%; transform: translateX(-50%); font-size: 1.5rem; animation: bounce 2s infinite; }
        .countdown-box { background: rgba(0,0,0,0.05); padding: 20px; text-align: center; border-top: 2px dashed #ccc; }
        .timer { font-family: monospace; font-size: 2rem; font-weight: bold; color: var(--primary); display: flex; justify-content: center; gap: 15px; }

        /* Clock & Quiz & Scanner */
        .clock-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 20px; }
        .clock-item { background: var(--card-bg); padding: 15px; border-radius: 10px; border: 1px solid var(--border-color); }
        .clock-num { font-size: 2rem; font-weight: bold; color: var(--primary); display: block; }
        
        .quiz-btn { width: 100%; padding: 15px; border-radius: 10px; margin-top: 10px; background: white; border: 1px solid #ddd; font-size: 1rem; transition: 0.2s; }
        .quiz-btn.correct { background: #22c55e; color: white; border-color: #22c55e; }
        .quiz-btn.wrong { background: #ef4444; color: white; border-color: #ef4444; animation: shake 0.5s; }

        .scanner-box { width: 120px; height: 120px; margin: 0 auto; background: rgba(255,255,255,0.5); border: 2px solid #ccc; border-radius: 20px; position: relative; display: flex; align-items: center; justify-content: center; font-size: 4rem; overflow: hidden; }
        .scan-line { position: absolute; top: 0; left: 0; width: 100%; height: 4px; background: #22c55e; box-shadow: 0 0 10px #22c55e; animation: scan 1.5s linear infinite; display: none; }
        .scanner-box.active { border-color: #22c55e; background: rgba(34, 197, 94, 0.1); }
        .scanner-box.active .scan-line { display: block; }

        /* Contract */
        .contract { background: #fffdf0; color: #333; padding: 40px; border-radius: 5px; transform: rotate(1deg); border: 1px solid #ccc; box-shadow: 0 10px 20px rgba(0,0,0,0.1); position: relative; }
        .contract-pin { width: 20px; height: 20px; background: #ef4444; border-radius: 50%; position: absolute; top: -10px; left: 50%; transform: translateX(-50%); box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .stamp { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-20deg) scale(1.5); border: 5px solid #e11d48; color: #e11d48; font-size: 3rem; font-weight: bold; padding: 10px 20px; opacity: 0; pointer-events: none; transition: 0.3s; border-radius: 10px; }
        .stamp.visible { opacity: 0.8; transform: translate(-50%, -50%) rotate(-20deg) scale(1); }

        /* Code Block */
        .code-block { background: #1e1e1e; border-radius: 10px; overflow: hidden; color: #d4d4d4; text-align: left; font-family: monospace; box-shadow: var(--shadow); margin-top: 40px; }
        .code-header { background: #252526; padding: 10px 15px; display: flex; align-items: center; border-bottom: 1px solid #333; }
        .dots { display: flex; gap: 8px; margin-right: 15px; }
        .dot { width: 12px; height: 12px; border-radius: 50%; }
        .code-content { padding: 20px; overflow-x: auto; white-space: pre; line-height: 1.5; font-size: 0.9rem; }
        .k-purple { color: #c586c0; } .k-blue { color: #569cd6; } .k-green { color: #4ec9b0; } .k-yellow { color: #dcdcaa; } .k-string { color: #ce9178; } .k-comment { color: #6a9955; font-style: italic; }

        /* Animations */
        @keyframes bounce { 0%, 100% { transform: translate(-50%, 0); } 50% { transform: translate(-50%, -10px); } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-5px); } 50% { transform: translateX(5px); } 75% { transform: translateX(-5px); } 100% { transform: translateX(0); } }
        @keyframes scan { 0% { top: 0%; } 100% { top: 100%; } }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

        /* Proposal Overlay */
        #proposal { position: fixed; inset: 0; background: url('https://images.unsplash.com/photo-1518621736915-f3b1c41bfd00?q=80&w=1920&auto=format&fit=crop') center/cover; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        #proposal::before { content: ''; position: absolute; inset: 0; background: rgba(0,0,0,0.5); }
        .proposal-content { position: relative; z-index: 1; color: white; padding: 20px; }
        .btn-group { margin-top: 30px; display: flex; gap: 20px; justify-content: center; }
        .btn-yes { background: #22c55e; color: white; padding: 15px 40px; font-size: 1.2rem; border-radius: 50px; font-weight: bold; }
        .btn-no { background: #ef4444; color: white; padding: 15px 40px; font-size: 1.2rem; border-radius: 50px; font-weight: bold; position: relative; }

        /* Floating Button */
        #music-btn { position: fixed; bottom: 20px; right: 20px; background: rgba(255,255,255,0.2); backdrop-filter: blur(5px); padding: 15px; border-radius: 50%; color: var(--primary); box-shadow: 0 4px 10px rgba(0,0,0,0.2); z-index: 50; display: none; }

        /* Modal */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.7); backdrop-filter: blur(5px); z-index: 200; display: none; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s; }
        .modal-overlay.open { display: flex; opacity: 1; }
        .modal-box { background: #fffdf5; padding: 40px; width: 90%; max-width: 500px; border-radius: 5px; position: relative; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.3); transform: scale(0.8); transition: transform 0.3s; }
        .modal-overlay.open .modal-box { transform: scale(1); }
        .close-modal { position: absolute; top: 10px; right: 15px; font-size: 1.5rem; background: none; color: #999; }

    </style>
</head>
<body>

    <div id="proposal">
        <div class="proposal-content">
            <h1 style="font-size: 3.5rem; margin-bottom: 20px; animation: bounce 2s infinite;">Will you marry me? üíç</h1>
            <div class="btn-group">
                <button class="btn-yes" onclick="acceptProposal()">YES! üòç</button>
                <button class="btn-no" id="noBtn" onmouseover="moveButton()" ontouchstart="moveButton()">No üò¢</button>
            </div>
        </div>
    </div>

    <audio id="bgMusic" loop>
        <source src="assets/myaudio.mp3" type="audio/mpeg">
    </audio>
    <button id="music-btn" onclick="toggleMusic()">üéµ</button>

    <div id="app" class="hidden">
        
        <nav>
            <div class="logo">NISHANDH ‚ù§Ô∏è <span id="herName">KOKILA</span></div>
            <button class="theme-btn" onclick="toggleTheme()">üåô</button>
        </nav>

        <div class="container">
            
            <h1 class="section-title" style="margin-top: 100px;">Designing for Love</h1>

            <div class="carousel-container">
                <div class="slide active">
                    <img src="assets/NEW/IMG_20241020_101214.jpg" alt="1">
                    <div class="caption">Every moment with you...</div>
                </div>
                <div class="slide">
                    <img src="assets/NEW/IMG_20241020_081215.jpg" alt="2">
                    <div class="caption">...is a beautiful memory.</div>
                </div>
                <div class="slide">
                    <img src="assets/NEW/IMG_20241020_081202.jpg" alt="3">
                    <div class="caption">I love you forever.</div>
                </div>
                <button class="carousel-btn prev" onclick="moveSlide(-1)">&#10094;</button>
                <button class="carousel-btn next" onclick="moveSlide(1)">&#10095;</button>
            </div>

            <h2 class="section-title" style="margin-top: 60px;">3 Reasons Why I Love You ‚ù§Ô∏è</h2>
            <div class="cards-grid">
                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <div style="font-size: 3rem;">ü•∞</div>
                            <h3>Your Smile</h3>
                        </div>
                        <div class="flip-card-back">
                            <p>"It lights up my darkest days. Whenever I see you smile, I forget all my problems."</p>
                        </div>
                    </div>
                </div>
                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <div style="font-size: 3rem;">üß†</div>
                            <h3>Your Mind</h3>
                        </div>
                        <div class="flip-card-back">
                            <p>"I love how you think, how you challenge me, and how you support my dreams."</p>
                        </div>
                    </div>
                </div>
                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <div style="font-size: 3rem;">üåü</div>
                            <h3>Our Future</h3>
                        </div>
                        <div class="flip-card-back">
                            <p>"I can't wait to build a life with you. You are my forever."</p>
                        </div>
                    </div>
                </div>
            </div>

            <h2 class="section-title reveal">Our Journey Together ‚ú®</h2>
            <div class="timeline">
                
                <div class="timeline-item reveal">
                    <div class="timeline-dot">‚ù§Ô∏è</div>
                    <div class="timeline-content">
                        <img src="assets/IMG20230705102717.jpg" class="timeline-img">
                        <div class="timeline-date">JUL 05, 2023</div>
                        <h3>The First Date</h3>
                        <p>The moment I saw you, I knew my life was about to change forever.</p>
                    </div>
                </div>

                <div class="timeline-item reveal">
                    <div class="timeline-dot">üíå</div>
                    <div class="timeline-content">
                        <img src="assets/IMG_0337.jpg" class="timeline-img">
                        <div class="timeline-date">OCT 19, 2024</div>
                        <h3>Our First Trip</h3>
                        <p>Traveling the world feels like home when I'm walking beside you.</p>
                    </div>
                </div>

                <div class="timeline-item reveal">
                    <div class="timeline-dot">‚ù§Ô∏è</div>
                    <div class="timeline-content">
                        <img src="assets/IMG_0341.jpg" class="timeline-img">
                        <div class="timeline-date">JUL 05, 2023</div>
                        <h3>Holding</h3>
                        <p>Traveling the world is better when I'm holding your hand.</p>
                    </div>
                </div>

                <div class="timeline-item reveal">
                    <div class="timeline-dot">üíå</div>
                    <div class="timeline-content">
                        <img src="assets/IMG_0356.jpg" class="timeline-img">
                        <div class="timeline-date">DEC 25, 2024</div>
                        <h3>Favorite</h3>
                        <p>Wherever we go, my favorite place is next to you.</p>
                    </div>
                </div>

                <div class="timeline-item reveal">
                    <div class="timeline-dot">‚ù§Ô∏è</div>
                    <div class="timeline-content">
                        <img src="assets/NEW/IMG_20241019_174947.jpg" class="timeline-img">
                        <div class="timeline-date">FEB 14, 2024</div>
                        <h3>Feels</h3>
                        <p>Loving you feels easy, like breathing.</p>
                    </div>
                </div>

                <div class="timeline-item reveal">
                    <div class="timeline-dot">üíå</div>
                    <div class="timeline-content">
                        <img src="assets/NEW/IMG_20241020_081202.jpg" class="timeline-img">
                        <div class="timeline-date">DEC 25, 2024</div>
                        <h3>World</h3>
                        <p>Seeing the world means more when I‚Äôm seeing it with you.</p>
                    </div>
                </div>

                <div class="timeline-item reveal">
                    <div class="timeline-dot">‚ù§Ô∏è</div>
                    <div class="timeline-content">
                        <img src="assets/NEW/IMG_20241020_081215.jpg" class="timeline-img">
                        <div class="timeline-date">FEB 14, 2024</div>
                        <h3>Love</h3>
                        <p>Love isn‚Äôt about the place, it‚Äôs about who I‚Äôm with.</p>
                    </div>
                </div>

                <div class="timeline-item reveal">
                    <div class="timeline-dot">üíå</div>
                    <div class="timeline-content">
                        <img src="assets/NEW/IMG_20241020_085601.jpg" class="timeline-img">
                        <div class="timeline-date">DEC 25, 2024</div>
                        <h3>Adventure</h3>
                        <p>I found my adventure the day I found you.</p>
                    </div>
                </div>

                <div class="timeline-item reveal">
                    <div class="timeline-dot">‚ù§Ô∏è</div>
                    <div class="timeline-content">
                        <img src="assets/NEW/IMG_20241020_100555.jpg" class="timeline-img">
                        <div class="timeline-date">FEB 14, 2024</div>
                        <h3>Story</h3>
                        <p>Every story I love starts with you.</p>
                    </div>
                </div>

                <div class="timeline-item reveal">
                    <div class="timeline-dot">üíå</div>
                    <div class="timeline-content">
                        <img src="assets/NEW/IMG_20241020_101214.jpg" class="timeline-img">
                        <div class="timeline-date">DEC 25, 2024</div>
                        <h3>Moments</h3>
                        <p>I don‚Äôt chase sunsets anymore, I chase moments with you.</p>
                    </div>
                </div>

                <div class="timeline-item reveal">
                    <div class="timeline-dot">‚ù§Ô∏è</div>
                    <div class="timeline-content">
                        <img src="assets/NEW/IMG_20241020_132936.jpg" class="timeline-img">
                        <div class="timeline-date">FEB 14, 2024</div>
                        <h3>Baby</h3>
                        <p>Loving you feels like choosing the right path every time.</p>
                    </div>
                </div>

                <div class="timeline-item reveal">
                    <div class="timeline-dot">üíå</div>
                    <div class="timeline-content">
                        <img src="assets/Baby.jpg" class="timeline-img">
                        <div class="timeline-date">DEC 25, 2024</div>
                        <h3>Found Gem</h3>
                        <p>I stopped searching when I found you.</p>
                    </div>
                </div>

            </div>

            <div style="text-align: center; margin: 60px 0;">
                <h2 class="section-title">I have loved you for...</h2>
                <div class="clock-grid">
                    <div class="clock-item"><span id="days" class="clock-num">0</span> DAYS</div>
                    <div class="clock-item"><span id="hours" class="clock-num">0</span> HRS</div>
                    <div class="clock-item"><span id="minutes" class="clock-num">0</span> MIN</div>
                    <div class="clock-item"><span id="seconds" class="clock-num">0</span> SEC</div>
                </div>
            </div>

            <div style="position: relative; margin: 60px 0;">
                <h2 class="section-title">Where it all began üåç</h2>
                <div style="border-radius: 20px; overflow: hidden; border: 4px solid var(--border-color); height: 400px;">
                    <iframe src="https://www.google.com/maps/embed?pb=!4v1771006235634!6m8!1m7!1slqBu1DKmTYtbtC-dKMHCaw!2m2!1d11.01606955509638!2d76.96806819244154!3f14.405265773539101!4f-9.891882543011647!5f0.7820865974627469" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                </div>
            </div>

            <div class="glass" style="padding: 40px; margin: 60px 0; text-align: center; position: relative;">
                <div style="font-size: 2rem; position: absolute; top: 10px; right: 20px; opacity: 0.3;">ü™∂</div>
                <h2 class="section-title">My Promise</h2>
                <p id="typewriter" style="font-size: 1.2rem; min-height: 100px;"></p>
                <div style="text-align: right; font-family: 'Dancing Script'; font-size: 1.5rem; color: var(--primary);">- Forever Yours, Nishandh</div>
            </div>

            <div class="ticket">
                <div class="ticket-header">OFFICIAL TICKET TO HAPPINESS ‚ù§Ô∏è</div>
                <div class="ticket-body">
                    <div class="text-center">
                        <div style="font-size: 2.5rem;">üåä</div>
                        <h3>KANYAKUMARI</h3>
                        <div style="color: var(--primary); font-weight: bold;">Feb 27, 2026</div>
                    </div>
                    <div class="route">
                        <div>Breaking the Distance</div>
                        <div class="route-line"><div class="train-icon">üöÇ</div></div>
                        <div style="font-size: 0.8rem; font-weight: bold;">IN TRANSIT TO LOVE</div>
                    </div>
                    <div class="text-center">
                        <div style="font-size: 2.5rem;">‚õ∞Ô∏è</div>
                        <h3>COIMBATORE</h3>
                        <div style="color: var(--primary); font-weight: bold;">Feb 28, 2026</div>
                    </div>
                </div>
                <div class="countdown-box">
                    <div>Time until we meet:</div>
                    <div class="timer">
                        <span id="meet-days">00</span>:
                        <span id="meet-hours">00</span>:
                        <span id="meet-minutes">00</span>:
                        <span id="meet-seconds">00</span>
                    </div>
                </div>
            </div>

            <div class="text-center" style="margin: 80px 0;">
                <h2 class="section-title">I wrote something for you...</h2>
                <div onclick="openModal('letter')" style="font-size: 5rem; cursor: pointer; animation: float 3s infinite;">üíå</div>
                <div>Click to Open</div>
            </div>

            <div class="glass" style="padding: 30px; margin: 60px 0;">
                <h2 class="section-title">How well do you know us?</h2>
                
                <div style="margin-bottom: 30px;">
                    <h3>1. I am travelling 450km from Kanyakumari for... üöÇ</h3>
                    <button class="quiz-btn" onclick="checkAnswer(this, false)">The Weather üå¶Ô∏è</button>
                    <button class="quiz-btn" onclick="checkAnswer(this, true)">To hug my world (You) ‚ù§Ô∏è</button>
                </div>

                <div style="margin-bottom: 30px;">
                    <h3>2. What is Nishandh's favorite view? üëÄ</h3>
                    <button class="quiz-btn" onclick="checkAnswer(this, true)">Kokila's Smile ü•∞</button>
                    <button class="quiz-btn" onclick="checkAnswer(this, false)">The Ocean üåä</button>
                </div>

                <div style="margin-bottom: 30px;">
                    <h3>3. What is the first thing I will do on Feb 28th? ü´Ç</h3>
                    <button class="quiz-btn" onclick="checkAnswer(this, false)">Shake hands ü§ù</button>
                    <button class="quiz-btn" onclick="checkAnswer(this, true)">Hug you tight ü´Ç</button>
                </div>
            </div>

            <h2 class="section-title">Emergency Love Kit üöë</h2>
            <div class="cards-grid">
                <div class="glass text-center" style="padding: 20px; cursor: pointer;" onclick="openEnvelope('miss')">
                    <div style="font-size: 3rem;">ü•∫</div>
                    <h3>Open When...</h3>
                    <p style="color: var(--primary);">You Miss Me</p>
                </div>
                <div class="glass text-center" style="padding: 20px; cursor: pointer;" onclick="openEnvelope('travel')">
                    <div style="font-size: 3rem;">üß≥</div>
                    <h3>Open On...</h3>
                    <p style="color: #3b82f6;">Feb 27th</p>
                </div>
                <div class="glass text-center" style="padding: 20px; cursor: pointer;" onclick="openEnvelope('love')">
                    <div style="font-size: 3rem;">üíñ</div>
                    <h3>Open When...</h3>
                    <p style="color: #a855f7;">You Need a Smile</p>
                </div>
            </div>

            <div style="text-align: center; margin: 80px 0;">
                <h2 class="section-title">Security Check üîí</h2>
                <div id="scanner" class="scanner-box" onmousedown="startScan()" onmouseup="stopScan()" onmouseleave="stopScan()" ontouchstart="startScan()" ontouchend="stopScan()">
                    üëÜ
                    <div class="scan-line"></div>
                </div>
                <p id="scan-msg" style="margin-top: 10px;">Hold to scan...</p>
                <div id="access-granted" class="hidden" style="color: #22c55e; font-weight: bold; margin-top: 20px;">
                    ACCESS GRANTED: Soulmate Verified! ‚úÖ
                </div>
            </div>

            <div class="contract" style="max-width: 600px; margin: 0 auto;">
                <div class="contract-pin"></div>
                <h2 class="section-title">LOVE CONTRACT</h2>
                <p>I, <b>Kokila</b>, agree to:</p>
                <ul style="text-align: left; margin: 20px 0;">
                    <li>Share my ice cream üç¶</li>
                    <li>Hug Nishandh tightly ü´Ç</li>
                    <li>Never go to sleep angry üåô</li>
                    <li>Be partners in crime forever üíç</li>
                </ul>
                <div id="stamp" class="stamp">ACCEPTED ‚ù§Ô∏è</div>
                <button id="sign-btn" onclick="signContract()" style="background: #333; color: white; padding: 10px 30px; border-radius: 20px; width: 100%;">Click to Sign</button>
            </div>

            <div class="code-block">
                <div class="code-header">
                    <div class="dots"><div class="dot" style="background:#ff5f56"></div><div class="dot" style="background:#ffbd2e"></div><div class="dot" style="background:#27c93f"></div></div>
                    <div>love_logic.js</div>
                </div>
                <div class="code-content">
<span class="k-comment">// Author: Nishandh (Full Stack Dev)</span>
<span class="k-purple">const</span> <span class="k-blue">myLife</span> = <span class="k-string">"Kanyakumari"</span>;
<span class="k-purple">const</span> <span class="k-blue">mySoul</span> = <span class="k-string">"Coimbatore"</span>;

<span class="k-purple">while</span> (<span class="k-blue">alive</span>) {
  <span class="k-blue">heart</span>.<span class="k-yellow">beatFor</span>(<span class="k-string">"Kokila"</span>);
  <span class="k-blue">distance</span> = 0;
  <span class="k-blue">happiness</span> = <span class="k-purple">Infinity</span>;
}<div style="display:inline-block; width: 8px; height: 15px; background: var(--primary); animation: pulse 1s infinite;"></div>
                </div>
            </div>

            <footer style="text-align: center; margin-top: 50px; padding: 20px; border-top: 1px solid var(--border-color);">
                <p style="font-family: 'Dancing Script'; font-size: 1.5rem;">Created with ‚ù§Ô∏è by Nishandh</p>
                <small>See you in Coimbatore | Feb 28, 2026</small>
            </footer>

        </div>
    </div>

    <div id="modal" class="modal-overlay">
        <div class="modal-box">
            <button class="close-modal" onclick="closeModal()">√ó</button>
            <div id="modal-content"></div>
        </div>
    </div>

    <script>
        // --- LOGIC ---

        // 1. Proposal
        function acceptProposal() {
            var duration = 3 * 1000;
            var end = Date.now() + duration;
            (function frame() {
                confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 } });
                confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 } });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());

            document.getElementById('proposal').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('proposal').style.display = 'none';
                document.getElementById('app').classList.remove('hidden');
                
                // Play Music
                var audio = document.getElementById("bgMusic");
                audio.volume = 0.5;
                audio.play().catch(e => console.log("Audio needs user interaction"));
                document.getElementById('music-btn').style.display = 'block';
            }, 1000);
        }

        // 2. Music Toggle
        function toggleMusic() {
            var audio = document.getElementById("bgMusic");
            var btn = document.getElementById("music-btn");
            if (audio.paused) {
                audio.play();
                btn.style.opacity = "1";
            } else {
                audio.pause();
                btn.style.opacity = "0.5";
            }
        }

        // 3. Runaway No Button
        function moveButton() {
            var btn = document.getElementById('noBtn');
            var x = Math.random() * (window.innerWidth - 100);
            var y = Math.random() * (window.innerHeight - 100);
            btn.style.position = 'fixed';
            btn.style.left = x + 'px';
            btn.style.top = y + 'px';
        }

        // 4. Dark Mode
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
        }

        // 5. Carousel
        let slideIndex = 0;
        const slides = document.querySelectorAll('.slide');
        function showSlide(n) {
            slides.forEach(s => s.classList.remove('active'));
            slideIndex = (n + slides.length) % slides.length;
            slides[slideIndex].classList.add('active');
        }
        function moveSlide(n) { showSlide(slideIndex + n); }
        setInterval(() => moveSlide(1), 4000);

        // 6. Scroll Reveal
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if(entry.isIntersecting) entry.target.classList.add('active');
            });
        });
        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

        // 7. Timer (Clock & Countdown)
        const startDate = new Date(2023, 0, 1); // Jan 1 2023
        const meetDate = new Date(2026, 1, 28, 10, 0, 0); // Feb 28 2026

        function updateTimers() {
            const now = new Date();
            
            // Relationship Clock
            const diff = now - startDate;
            document.getElementById('days').innerText = Math.floor(diff / (1000 * 60 * 60 * 24));
            document.getElementById('hours').innerText = Math.floor((diff / (1000 * 60 * 60)) % 24);
            document.getElementById('minutes').innerText = Math.floor((diff / 1000 / 60) % 60);
            document.getElementById('seconds').innerText = Math.floor((diff / 1000) % 60);

            // Meet Countdown
            const left = meetDate - now;
            if(left > 0) {
                document.getElementById('meet-days').innerText = Math.floor(left / (1000 * 60 * 60 * 24));
                document.getElementById('meet-hours').innerText = Math.floor((left % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                document.getElementById('meet-minutes').innerText = Math.floor((left % (1000 * 60 * 60)) / (1000 * 60));
                document.getElementById('meet-seconds').innerText = Math.floor((left % (1000 * 60)) / 1000);
            }
        }
        setInterval(updateTimers, 1000);

        // 8. Typewriter
        const text = "I promise to love you in every moment. You are my best friend, my soulmate, and my greatest gift.";
        let i = 0;
        const typeEl = document.getElementById('typewriter');
        
        const typeObserver = new IntersectionObserver((entries) => {
            if(entries[0].isIntersecting && i === 0) {
                function type() {
                    if (i < text.length) {
                        typeEl.innerHTML += text.charAt(i);
                        i++;
                        setTimeout(type, 50);
                    }
                }
                type();
            }
        });
        typeObserver.observe(typeEl);

        // 9. Modals (Letter & Emergency)
        const modal = document.getElementById('modal');
        const modalContent = document.getElementById('modal-content');
        
        function openModal(type) {
            modal.classList.add('open');
            if(type === 'letter') {
                modalContent.innerHTML = `
                    <h2 style="font-family:'Dancing Script'; color:var(--primary); font-size:2rem;">My Dearest Kokila</h2>
                    <p style="font-style:italic; margin:20px 0;">"Distance is just a test to see how far love can travel. I am counting every second until I find my heart in Coimbatore."</p>
                    <p>Wait for me. I'm coming home to you.</p>
                `;
                confetti({ particleCount: 50, spread: 60, colors: ['#f43f5e', '#ffffff'] });
            }
        }

        function openEnvelope(type) {
            modal.classList.add('open');
            let msg = "";
            if(type === 'miss') msg = "<h3>I Miss You Too!</h3><p>Close your eyes. Remember I am just one call away.</p>";
            if(type === 'travel') msg = "<h3>Safe Travels!</h3><p>Don't forget your charger! See you soon!</p>";
            if(type === 'love') msg = "<h3>You are Beautiful</h3><p>Just in case nobody told you today: You are the best!</p>";
            modalContent.innerHTML = msg;
        }

        function closeModal() { modal.classList.remove('open'); }

        // 10. Quiz
        let correct = 0;
        function checkAnswer(btn, isCorrect) {
            if(isCorrect) {
                btn.classList.add('correct');
                confetti({ particleCount: 30, spread: 50, origin: { y: 0.7 } });
                correct++;
            } else {
                btn.classList.add('wrong');
            }
        }

        // 11. Scanner
        let scanTimer;
        function startScan() {
            document.getElementById('scanner').classList.add('active');
            document.getElementById('scan-msg').innerText = "Scanning...";
            scanTimer = setTimeout(() => {
                document.getElementById('scanner').classList.remove('active');
                document.getElementById('access-granted').classList.remove('hidden');
                document.getElementById('scan-msg').innerText = "Verified!";
                confetti();
            }, 2000);
        }
        function stopScan() {
            clearTimeout(scanTimer);
            document.getElementById('scanner').classList.remove('active');
            document.getElementById('scan-msg').innerText = "Hold to scan...";
        }

        // 12. Contract
        function signContract() {
            document.getElementById('stamp').classList.add('visible');
            document.getElementById('sign-btn').innerText = "Signed & Sealed!";
            document.getElementById('sign-btn').disabled = true;
            confetti();
            setTimeout(() => {
                window.open("https://wa.me/919487187639?text=I%20signed%20the%20love%20contract!%20%F0%9F%92%8D", "_blank");
            }, 1500);
        }

    </script>
</body>
</html>